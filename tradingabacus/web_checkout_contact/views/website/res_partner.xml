<odoo>
    <data>
        
         <template id="fe_address_checkout" inherit_id="website_sale.address">
            <!-- Replace label text to "Identificación" -->
            <xpath expr="//label[@for='o_vat']" position="replace">
                <label class="col-form-label" for="o_vat">Identificación</label>
            </xpath>
            
            <!-- Add custom identification type selector after label -->
            <xpath expr="//label[@for='o_vat']" position="after">
                <select name="l10n_latam_identification_type_id_maskared" id="l10n_latam_identification_type_id_maskared" class="form-control" t-att-readonly="'1' if partner_sudo and partner_sudo.vat and not can_edit_vat else None">
                    <option value="22" t-att-selected="partner_sudo and partner_sudo.l10n_latam_identification_type_id and partner_sudo.l10n_latam_identification_type_id.id == 22">Cédula Extranjería</option>
                    <option value="13" t-att-selected="partner_sudo and partner_sudo.l10n_latam_identification_type_id and partner_sudo.l10n_latam_identification_type_id.id == 13">Cédula de Ciudadanía</option>    
                    <option value="21" t-att-selected="partner_sudo and partner_sudo.l10n_latam_identification_type_id and partner_sudo.l10n_latam_identification_type_id.id == 21">Tarjeta Extranjería</option>
                    <option value="42" t-att-selected="partner_sudo and partner_sudo.l10n_latam_identification_type_id and partner_sudo.l10n_latam_identification_type_id.id == 42">Nº Identificación extranjera</option>                                              
                    <option value="31" t-att-selected="partner_sudo and partner_sudo.l10n_latam_identification_type_id and partner_sudo.l10n_latam_identification_type_id.id == 31">NIT</option>
                    <option value="50" t-att-selected="partner_sudo and partner_sudo.l10n_latam_identification_type_id and partner_sudo.l10n_latam_identification_type_id.id == 50">VAT Extranjero</option>
                    <option value="11" t-att-selected="partner_sudo and partner_sudo.l10n_latam_identification_type_id and partner_sudo.l10n_latam_identification_type_id.id == 11">Registro Civil</option>
                    <option value="41" t-att-selected="partner_sudo and partner_sudo.l10n_latam_identification_type_id and partner_sudo.l10n_latam_identification_type_id.id == 41">Pasaporte</option>
                    <option value="12" t-att-selected="partner_sudo and partner_sudo.l10n_latam_identification_type_id and partner_sudo.l10n_latam_identification_type_id.id == 12">Tarjeta Identidad</option>                                                                   
                    <option value="91" t-att-selected="partner_sudo and partner_sudo.l10n_latam_identification_type_id and partner_sudo.l10n_latam_identification_type_id.id == 91">NIUP *</option>
                </select>
                <input type="hidden" name="l10n_latam_identification_type_id" t-att-value="partner_sudo and partner_sudo.l10n_latam_identification_type_id and partner_sudo.l10n_latam_identification_type_id.id or ''"/>
            </xpath>
            
            <!-- Hide obligation types div -->
            <xpath expr="//div[@id='div_obligation_types']" position="attributes">
                <attribute name="style">display:none !important;</attribute>
            </xpath>

            <xpath expr="//div[@id='company_name_div']" position="replace"/>
            <xpath expr="//div[@id='div_city_id']" position="replace"/>
            <xpath expr="//div[@id='div_city']" position="replace"/>
            <xpath expr="//div[@id='div_zip']" position="replace"/>
            <xpath expr="//div[@id='div_zip']" position="replace"/>
            
Barrio
            <xpath expr="//div[@id='div_vat']" position="after">
                <div id="company_name_div" class="col-lg-6 mb-2">
                    <label class="col-form-label fw-normal label-optional" for="o_company_name">
                        Company Name
                    </label>
                    <input id="o_company_name" type="text" name="company_name" t-att-value="partner_sudo.commercial_company_name" t-att-readonly="'1' if vat_warning else None" class="form-control"/>
                    <small t-if="vat_warning" class="form-text text-muted d-block d-lg-none">
                        Changing company name is not allowed once document(s) have been issued for your account. Please contact us directly for this operation.
                    </small>
                </div>
            </xpath>
            
            <xpath expr="//input[@name='vat']" position="after">
                <input name="verification_code" id="verification_code" type="number" t-att-value="partner_sudo and partner_sudo.verification_code or ''" min="0" max="9" step="1" class="form-control vat_no_nit"/>
            </xpath>
            
            
              <xpath expr="//select[@name='state_id']" position="after">
                <select name="_state_id" id="o_state_id_colombia" t-att-value="partner_sudo and partner_sudo._state_id and partner_sudo._state_id.id or ''" class="form-control"/>
            </xpath>

            <xpath expr="//div[@id='div_state']" position="after">
                <div id="div_city_custom" class="col-md-8 mb-2">
                    <label class="col-form-label" for="o_city">City</label>
                    <input id="o_city_custom" type="text" name="city" class="form-control" t-att-value="partner_sudo and partner_sudo.city or ''"/>
                    <select name="municipality_id" id="o_municipality_id" t-att-value="partner_sudo and partner_sudo.municipality_id and partner_sudo.municipality_id.id or ''" class="form-control">
                        <option value="">Municipio</option>
                    </select>
                </div>
            </xpath>

            <xpath expr="//div[@id='div_city']" position="after">
                <t t-if="zip_before_city">
                    <div id="div_zip" class="col-md-4 mb-2">
                        <label class="col-form-label label-optional" for="o_zip">Zip Code</label>
                        <input id="o_zip" type="text" name="zip" class="form-control" t-att-value="partner_sudo.zip"/>
                    </div>
                </t>
                <t t-if="not zip_before_city">
                    <div id="div_zip" class="col-md-4 mb-2">
                        <label class="col-form-label label-optional" for="o_zip">Zip Code</label>
                        <input id="o_zip" type="text" name="zip" class="form-control" t-att-value="partner_sudo.zip"/>
                    </div>
                </t>
            </xpath>

        </template>
            
        <function model="ir.model.fields" name="formbuilder_whitelist">
            <value>res.partner</value>
            <value eval="[
                            'verification_code',
                            'municipality_id',
                            '_state_id',
                            'email_edi',
                            'is_company',
                            'company_type',
                            'l10n_latam_identification_type_id'
                        ]"/>
        </function>

    </data>
</odoo>
